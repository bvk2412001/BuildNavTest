System.register("chunks:///_virtual/Astar.ts",["cc","./BinaryHeap.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy,r=e.Vec3},function(e){n=e.BinaryHeap}],execute:function(){t._RF.push({},"3a8d2z5ZhBKLb4QNlLsVGg2","Astar",void 0);e("Astar",function(){function e(){}return e.init=function(e){for(var t=0;t<e.length;t++){var r=e[t];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}},e.cleanUp=function(e){for(var t=0;t<e.length;t++){var r=e[t];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}},e.heap=function(){return new n((function(e){return e.f}))},e.search=function(e,t,n){this.init(e);var i=this.heap();for(i.push(t);i.size()>0;){var s=i.pop();if(s===n){for(var o=s,c=[];o.parent;)c.push(o),o=o.parent;return this.cleanUp(c),c.reverse()}s.closed=!0;for(var a=this.neighbours(e,s),u=0,h=a.length;u<h;u++){var f=a[u];if(!f.closed){var d=s.g+f.cost,l=f.visited;if(!l||d<f.g){if(f.visited=!0,f.parent=s,!f.centroid||!n.centroid)throw new Error("Unexpected state");f.h=f.h||r.squaredDistance(f.centroid,n.centroid),f.g=d,f.f=f.g+f.h,l?i.rescoreElement(f):i.push(f)}}}}return[]},e.neighbours=function(e,t){for(var r=[],n=0;n<t.neighbours.length;n++)r.push(e[t.neighbours[n]]);return r},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BinaryHeap.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"ab01cDrVgtDn5AN4KxNV/8X","BinaryHeap",void 0);t("BinaryHeap",function(){function t(t){this.scoreFunction=void 0,this.content=void 0,this.content=[],this.scoreFunction=t}var n=t.prototype;return n.push=function(t){this.content.push(t),this.sinkDown(this.content.length-1)},n.pop=function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},n.remove=function(t){var n=this.content.indexOf(t),i=this.content.pop();n!==this.content.length-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},n.size=function(){return this.content.length},n.rescoreElement=function(t){this.sinkDown(this.content.indexOf(t))},n.sinkDown=function(t){for(var n=this.content[t];t>0;){var i=(t+1>>1)-1,o=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(o)))break;this.content[i]=n,this.content[t]=o,t=i}},n.bubbleUp=function(t){for(var n=this.content.length,i=this.content[t],o=this.scoreFunction(i);;){var e=t+1<<1,c=e-1,s=null,h=void 0;if(c<n){var r=this.content[c];(h=this.scoreFunction(r))<o&&(s=c)}if(e<n){var u=this.content[e];this.scoreFunction(u)<(null===s?o:h)&&(s=e)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=i,t=s}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Builder.ts",["cc","./nUtils.ts"],(function(r){var e,n,o;return{setters:[function(r){e=r.cclegacy,n=r.Vec3},function(r){o=r.nUtils}],execute:function(){e._RF.push({},"f8929iHFYlJlaz7L0cvyCLc","Builder",void 0);var t={faces:[],vertices:[],centroid:[]};r("Builder",function(){function r(){}return r.buildZoneByJson=function(r){this.cleanGeometry();for(var e=r.vertices,o=r.faces,i=0;i<e.length;i+=3)t.vertices.push(new n(e[i],e[i+1],e[i+2]));for(var s=0;s<o.length/3;s++)this.computeCentroids(o[3*s],o[3*s+1],o[3*s+2]);return this.buildZone(t)},r.cleanGeometry=function(){t.vertices.length=0,t.faces.length=0,t.centroid.length=0},r.buildZone=function(r){var e=this.buildNavMesh(r);return this.groupNavMesh(e)},r.buildNavMesh=function(r){o.mergeVertices(r);var e=this.buildPolygonsFromGeometry(r);return e},r.computeCentroids=function(r,e,o){var i=new n;n.add(i,t.vertices[e],t.vertices[r]),n.add(i,t.vertices[o],i),n.multiplyScalar(i,i,1/3),t.faces.push(new Array(r,e,o)),t.centroid.push(i)},r.buildPolygonsFromGeometry=function(r){for(var e=[],n=r.vertices,o=0,t=r.faces.length;o<t;o++)e.push({vertexIds:r.faces[o],centroid:r.centroid[o],neighbours:[]});for(var i={polygons:e,vertices:n},s=0,u=e.length;s<u;s++){var c=e[s];this.buildPolygonNeighbours(c,i)}return i},r.groupNavMesh=function(r){var e={vertices:null,groups:null};e.vertices=r.vertices;var n=this.buildPolygonGroups(r);e.groups=[];for(var t=function(r,e){for(var n=0;n<r.length;n++)if(e===r[n])return n},i=0,s=n.length;i<s;i++){for(var u=n[i],c=[],l=0,g=u.length;l<g;l++){for(var h=u[l],a=[],d=[],v=0,f=h.neighbours.length;v<f;v++){var p=h.neighbours[v];a.push(t(u,p)),d.push(this.getSharedVerticesInOrder(h,p))}h.centroid.x=o.roundNumber(h.centroid.x,2),h.centroid.y=o.roundNumber(h.centroid.y,2),h.centroid.z=o.roundNumber(h.centroid.z,2),c.push({id:t(u,h),neighbours:a,vertexIds:h.vertexIds,centroid:h.centroid,portals:d})}e.groups.push(c)}return e},r.buildPolygonNeighbours=function(r,e){r.neighbours=[];for(var o=0,t=e.polygons.length;o<t;o++){if(r!==e.polygons[o])if(!(n.squaredDistance(r.centroid,e.polygons[o].centroid)>1e4))this.arrayIntersect(r.vertexIds,e.polygons[o].vertexIds).length>=2&&r.neighbours.push(e.polygons[o])}},r.getSharedVerticesInOrder=function(r,e){var n=r.vertexIds,o=n[0],t=n[1],i=n[2],s=e.vertexIds,u=s.includes(o),c=s.includes(t),l=s.includes(i);return u&&c&&l?Array.from(n):u&&c?[o,t]:c&&l?[t,i]:u&&l?[i,o]:(console.warn("Error,neighbors with <2 shared vertices found."),[])},r.buildPolygonGroups=function(r){var e=r.polygons,n=[],o=0;function t(r){for(var e=0,n=r.neighbours.length;e<n;e++){var o=r.neighbours[e];null==o.group&&(o.group=r.group,t(o))}}for(var i=0,s=e.length;i<s;i++){var u=e[i];null==u.group&&(u.group=o++,t(u)),n[u.group]||(n[u.group]=[]),n[u.group].push(u)}return n},r.arrayIntersect=function(){for(var r,e,n,o,t,i,s=[],u={},c=arguments.length,l=new Array(c),g=0;g<c;g++)l[g]=arguments[g];for(i=l.length-1,n=l[0].length,e=0,r=0;r<=i;r++)(o=l[r].length)<n&&(e=r,n=o);for(r=0;r<=i;r++){t=l[o=r===e?0:r||e].length;for(var h=0;h<t;h++){var a=l[o][h];u[a]===r-1?r===i?(s.push(a),u[a]=0):u[a]=r:0===r&&(u[a]=0)}}return s},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CameraFollow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,h,s,n,o,a,r,c,l,p,u,g,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,h=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,a=t.Node,r=t.Camera,c=t.Vec3,l=t.math,p=t.input,u=t.Input,g=t.Vec2,_=t.Component}],execute:function(){var d,v,f,T,C,y,E;n._RF.push({},"4f9e9PX9WNK3KJiv8VZ/29Z","CameraFollow",void 0);var M=o.ccclass,m=o.property;t("CameraFollowWithRotation",(d=M("CameraFollowWithRotation"),v=m(a),f=m(r),d((y=i((C=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return i=t.call.apply(t,[this].concat(n))||this,h(i,"target",y,s(i)),i.distance=30,i.otherHeight=10,i.minOtherHeight=3,i.maxOtherHeight=20,i.zoomSpeed=.05,i.minPolarAngle=10,i.maxPolarAngle=80,i.horizontalSensitivity=.2,i.verticalSensitivity=.1,i.rotationLerpSpeed=10,h(i,"camera",E,s(i)),i._spherical={radius:0,phi:0,theta:0},i._sphericalCurrent={radius:0,phi:0,theta:0},i._targetPos=new c,i._isDragging=!1,i._isRotating=!1,i._touchPoints=[],i._initialPinchDistance=0,i}e(i,t);var n=i.prototype;return n.start=function(){this._spherical.radius=this.distance,this._spherical.phi=l.toRadian(45),this._spherical.theta=0,this._sphericalCurrent.phi=this._spherical.phi,this._sphericalCurrent.theta=this._spherical.theta,this._sphericalCurrent.radius=this.distance,p.on(u.EventType.MOUSE_DOWN,this.onMouseDown,this),p.on(u.EventType.MOUSE_UP,this.onMouseUp,this),p.on(u.EventType.MOUSE_MOVE,this.onMouseMove,this),p.on(u.EventType.TOUCH_START,this.onTouchStart,this),p.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(u.EventType.TOUCH_END,this.onTouchEnd,this),p.on(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},n.onDestroy=function(){p.off(u.EventType.MOUSE_DOWN,this.onMouseDown,this),p.off(u.EventType.MOUSE_UP,this.onMouseUp,this),p.off(u.EventType.MOUSE_MOVE,this.onMouseMove,this),p.off(u.EventType.TOUCH_START,this.onTouchStart,this),p.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),p.off(u.EventType.TOUCH_END,this.onTouchEnd,this),p.off(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},n.update=function(t){if(this.target){this._targetPos.set(this.target.worldPosition),this._spherical.phi=l.clamp(this._spherical.phi,l.toRadian(this.minPolarAngle),l.toRadian(this.maxPolarAngle)),this._spherical.radius=this.distance,this._sphericalCurrent.radius=this.distance,this._isRotating&&(this._sphericalCurrent.theta=l.lerp(this._sphericalCurrent.theta,this._spherical.theta,t*this.rotationLerpSpeed),this._sphericalCurrent.phi=l.lerp(this._sphericalCurrent.phi,this._spherical.phi,t*this.rotationLerpSpeed));var i=new c(this._sphericalCurrent.radius*Math.sin(this._sphericalCurrent.phi)*Math.sin(this._sphericalCurrent.theta),this._sphericalCurrent.radius*Math.cos(this._sphericalCurrent.phi),this._sphericalCurrent.radius*Math.sin(this._sphericalCurrent.phi)*Math.cos(this._sphericalCurrent.theta)),e=this._targetPos.clone().add(i);if(this.node.setWorldPosition(e),this.node.lookAt(this._targetPos),this.camera){var h=this.camera.orthoHeight,s=this.otherHeight;this.camera.orthoHeight=l.lerp(h,s,10*t)}}},n.onMouseDown=function(t){0===t.getButton()&&(this._isDragging=!0)},n.onMouseUp=function(t){0===t.getButton()&&(this._isDragging=!1,this._isRotating=!1)},n.onMouseMove=function(t){if(this._isDragging){var i=t.getDelta();this._spherical.theta-=l.toRadian(i.x*this.horizontalSensitivity),this._spherical.phi-=l.toRadian(i.y*this.verticalSensitivity),this._isRotating=!0}},n.onTouchStart=function(t){var i=t.getTouches();if(1===i.length)this._isDragging=!0,this._touchPoints=[i[0].getLocation()];else if(i.length>=2){var e=i[0].getLocation(),h=i[1].getLocation();this._initialPinchDistance=g.distance(e,h)}},n.onTouchMove=function(t){var i=t.getTouches(),e=i.map((function(t){return t.getLocation()}));if(console.log("Touch points:",i.length),1===i.length&&this._isDragging){var h=t.getDelta();this._spherical.theta-=l.toRadian(h.x*this.horizontalSensitivity),this._spherical.phi-=l.toRadian(h.y*this.verticalSensitivity),this._isRotating=!0}else if(e.length>=2&&e[0]&&e[1]&&this._isDragging){var s=g.distance(e[0],e[1]),n=this._initialPinchDistance-s;this.otherHeight+=n*this.zoomSpeed,this.otherHeight=l.clamp(this.otherHeight,this.minOtherHeight,this.maxOtherHeight),this._initialPinchDistance=s,this.camera.orthoHeight=this.otherHeight,console.log("Updated otherHeight:",this.otherHeight)}},n.onTouchEnd=function(t){t.getTouches().length<=1&&(this._isDragging=!1,this._isRotating=!1),this._touchPoints=[],this._initialPinchDistance=0},i}(_)).prototype,"target",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(C.prototype,"camera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=C))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/Channel.ts",["cc","./nUtils.ts"],(function(t){var n,i;return{setters:[function(t){n=t.cclegacy},function(t){i=t.nUtils}],execute:function(){n._RF.push({},"53eb6n9zLJJKLVcIiMEG80P","Channel",void 0);t("Channel",function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=new Array),this.portals=t,this.path=n}var n=t.prototype;return n.push=function(t,n){void 0===n&&(n=null),null==n&&(n=t),this.portals.push({left:t,right:n})},n.stringPull=function(){var t,n,e,r=this.portals,l=[],h=0,a=0,u=0;t=r[0].left,n=r[0].left,e=r[0].right,l.push(t);for(var s=1;s<r.length;s++){var o=r[s].left,f=r[s].right;if(i.triarea2(t,e,f)<=0){if(!(i.vequal(t,e)||i.triarea2(t,n,f)>0)){l.push(n),n=t=n,e=t,a=h=a,u=h,s=h;continue}e=f,u=s}if(i.triarea2(t,n,o)>=0){if(!(i.vequal(t,n)||i.triarea2(t,e,o)<0)){l.push(e),n=t=e,e=t,a=h=u,u=h,s=h;continue}n=o,a=s}}0!==l.length&&i.vequal(l[l.length-1],r[r.length-1].left)||l.push(r[r.length-1].left),this.path=l,this.path.shift()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterMovement.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,n,r,a,c,s,l,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Vec3,s=e.input,l=e.Input,p=e.KeyCode,h=e.Component}],execute:function(){var u,v,y,_;r._RF.push({},"4b4dc9rKxRJaKMzSIqnvs1z","CharacterMovement",void 0);var f=a.ccclass,m=a.property;e("PlayerMovement",f("PlayerMovement")((y=t((v=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"moveSpeed",y,n(t)),o(t,"acceleration",_,n(t)),t._moveDir=new c,t._velocity=new c,t}i(t,e);var r=t.prototype;return r.start=function(){s.on(l.EventType.KEY_DOWN,this.onKeyDown,this),s.on(l.EventType.KEY_UP,this.onKeyUp,this)},r.onDestroy=function(){s.off(l.EventType.KEY_DOWN,this.onKeyDown,this),s.off(l.EventType.KEY_UP,this.onKeyUp,this)},r.update=function(e){var t=this._moveDir.clone().multiplyScalar(this.moveSpeed);c.lerp(this._velocity,this._velocity,t,this.acceleration*e);var i=this._velocity.clone().multiplyScalar(e),o=this.node.position.clone().add(i);this.node.setPosition(o)},r.onKeyDown=function(e){switch(e.keyCode){case p.KEY_W:this._moveDir.z=-1;break;case p.KEY_S:this._moveDir.z=1;break;case p.KEY_A:this._moveDir.x=-1;break;case p.KEY_D:this._moveDir.x=1}},r.onKeyUp=function(e){switch(e.keyCode){case p.KEY_W:case p.KEY_S:this._moveDir.z=0;break;case p.KEY_A:case p.KEY_D:this._moveDir.x=0}},t}(h)).prototype,"moveSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),_=t(v.prototype,"acceleration",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),u=v))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/ClampedCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Builder.ts","./NavMesh.ts","./joy-stick.ts"],(function(t){var e,n,i,o,s,a,r,h,p,u,c,l,d,m,g,y,E,v,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,h=t._decorator,p=t.JsonAsset,u=t.Vec3,c=t.v3,l=t.input,d=t.Input,m=t.KeyCode,g=t.Component,y=t.SkeletalAnimationComponent},function(t){E=t.Builder},function(t){v=t.NavMesh},function(t){_=t.JoyStick}],execute:function(){var f,K,Y,S,A,C,k,z;r._RF.push({},"34f9e/owaNHE6LE98+egryH","ClampedCtrl",void 0);var D,M=new u,b=new u,R=h.ccclass,w=h.property,j=(h.type,"idle");t("ClampedCtrl",(f=R("ClampedCtrl"),K=w(p),Y=w(_),f(((z=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,i(e,"navUrl",C,o(e)),i(e,"joyStick",k,o(e)),e.KEY_A=!1,e.KEY_W=!1,e.KEY_S=!1,e.KEY_D=!1,e.jumping=!1,e.canMove=!0,e.jumpstate=0,e.speed=new u(0,0,0),e.jumpSpeed=c(0,8,0),e.targetSpeed=new u(0,0,0),e.rotation=0,e.targetRotation=180,e._currentAnim="",e.speedAmount=.05,e.zone=null,e.anm=null,e.anmName=null,e}n(e,t);var r=e.prototype;return r.onEnable=function(){var t=s(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.anm=this.node.getComponent(y),this.playLoopAnm(j),e=E.buildZoneByJson(this.navUrl.json),this.zone=this.navUrl.name,v.setZoneData(this.zone,e),this._registerEvent();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onDisable=function(){v.clearZoneData(this.zone),this._unregisterEvent()},r._registerEvent=function(){l.on(d.EventType.KEY_UP,this.onKeyUp,this),l.on(d.EventType.KEY_DOWN,this.onKeyDown,this),this._currentAnim=null},r._unregisterEvent=function(){l.off(d.EventType.KEY_UP,this.onKeyUp,this),l.off(d.EventType.KEY_DOWN,this.onKeyDown,this)},r.playLoopAnm=function(t){this.anmName!=t&&(this.anm.play(t),this.anmName=t)},r.rotateRole=function(t){this.targetRotation=Math.atan2(t.x-this.node.position.x,t.z-this.node.position.z)*(180/Math.PI)%360,this.node.setRotationFromEuler(0,this.targetRotation,0)},r.update=function(t){this.stickCtrl(t)},r.getClamped=function(t){var e=v.getGroup(this.zone,t),n=v.getClosestNode(t,this.zone,e);return v.clampStep(t,n,this.zone,e,b),b},r.heroMove=function(){e.moving&&(u.add(M,this.node.position,this.speed),this.node.setPosition(this.getClamped(M)),this.node.setRotationFromEuler(0,this.targetRotation))},r.stickCtrl=function(t){e.moving?(this.targetRotation=this.joyStick.rotation,D=this.targetRotation*Math.PI/180,this.targetSpeed.x=this.speedAmount*Math.sin(D),this.targetSpeed.z=this.speedAmount*Math.cos(D),u.lerp(this.speed,this.speed,this.targetSpeed,5*t),this.heroMove(),this.playLoopAnm("run")):this.playLoopAnm(j)},r.keyCtrl=function(t){D=this.targetRotation*Math.PI/180,this.targetSpeed.x=this.targetSpeed.z=0,e.moving=!1,this.KEY_W&&(this.targetSpeed.x=this.speedAmount*Math.sin(D),this.targetSpeed.z=this.speedAmount*Math.cos(D),e.moving=!0),this.KEY_A&&(this.jumping||(this.targetRotation+=180*t),e.moving=!0),this.KEY_S?(this.targetSpeed.x=this.speedAmount*Math.sin(D),this.targetSpeed.z=this.speedAmount*Math.cos(D),e.moving=!0):this.KEY_D&&(this.jumping||(this.targetRotation-=180*t),e.moving=!0),e.moving?(u.lerp(this.speed,this.speed,this.targetSpeed,5*t),this.playLoopAnm("run")):(this.speed.x=this.speed.z=0,this.playLoopAnm(j)),this.heroMove()},r.onKeyDown=function(t){switch(t.keyCode){case m.KEY_A:this.KEY_A=!0;break;case m.KEY_W:this.KEY_W=!0;break;case m.KEY_D:this.KEY_D=!0;break;case m.KEY_S:this.KEY_S=!0}},r.onKeyUp=function(t){switch(t.keyCode){case m.KEY_A:this.KEY_A=!1;break;case m.KEY_W:this.KEY_W=!1;break;case m.KEY_D:this.KEY_D=!1;break;case m.KEY_S:this.KEY_S=!1,this.targetRotation+=180}},e}(g)).moving=!1,C=e((A=z).prototype,"navUrl",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(A.prototype,"joyStick",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=A))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/joy-stick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClampedCtrl.ts"],(function(t){var i,e,o,n,r,s,a,c,h,u,l,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Vec3,c=t.Vec2,h=t.Node,u=t.UIOpacity,l=t.Component},function(t){d=t.ClampedCtrl}],execute:function(){var p,y,f,E,m,x,T,v,A,b,g,C;r._RF.push({},"0df005HeCFHbLgcmwtx6QL2","joy-stick",void 0);var w=s.ccclass,S=s.property,O=new a,R=new c;t("JoyStick",(p=w("JoyStick"),y=S({type:h}),f=S({type:h}),E=S({type:u}),m=S({type:h}),p((v=i((T=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"maxRadius",v,n(i)),o(i,"touchArea",A,n(i)),o(i,"control",b,n(i)),o(i,"indexArrow",g,n(i)),o(i,"joyStick",C,n(i)),i.direction=new a,i.distance=0,i.magnitude=0,i.rotation=0,i._currentScreenVerticle=!0,i.startPos=new a,i.indexEuler=new a,i}e(i,t);var r=i.prototype;return r.onEnable=function(){this.touchArea.on(h.EventType.TOUCH_START,this.touchStart,this),this.touchArea.on(h.EventType.TOUCH_MOVE,this.touchMove,this),this.touchArea.on(h.EventType.TOUCH_END,this.touchEnd,this),this.touchArea.on(h.EventType.TOUCH_CANCEL,this.touchEnd,this),this.startPos=this.joyStick.position.clone()},r.onDisable=function(){this.touchArea.off(h.EventType.TOUCH_START,this.touchStart,this),this.touchArea.off(h.EventType.TOUCH_MOVE,this.touchMove,this),this.touchArea.off(h.EventType.TOUCH_END,this.touchEnd,this),this.touchArea.off(h.EventType.TOUCH_CANCEL,this.touchEnd,this)},r.touchStart=function(t){this.indexArrow.opacity=255,this.joyStick.setWorldPosition(t.getUILocation().x,t.getUILocation().y,0)},r.touchMove=function(t){d.moving=!0,t.getUILocation(R),this.joyStick.getWorldPosition(O),O.set(R.x-O.x,R.y-O.y,0),this.direction=O.clone().normalize(),this.distance=a.distance(O,a.ZERO),this.distance>=this.maxRadius&&(this.distance=this.maxRadius),this.magnitude=this.distance/this.maxRadius,a.multiplyScalar(O,this.direction,this.distance),this.rotation=-Math.atan2(this.direction.x,this.direction.y)*(180/Math.PI),this.rotation<=45&&this.rotation>=-45?this.indexEuler.z=0:this.rotation>45&&this.rotation<135?this.indexEuler.z=90:this.rotation<-45&&this.rotation>-135?this.indexEuler.z=-90:this.indexEuler.z=180,this.indexArrow.node.setRotationFromEuler(this.indexEuler),this.control.setPosition(O)},r.touchEnd=function(){this.indexArrow.opacity=0,d.moving=!1,this.magnitude=0,this.direction.set(a.ZERO),this.control.setPosition(a.ZERO),this.joyStick.setPosition(this.startPos)},i}(l)).prototype,"maxRadius",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),A=i(T.prototype,"touchArea",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(T.prototype,"control",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(T.prototype,"indexArrow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(T.prototype,"joyStick",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=T))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Mirror.ts","./CameraFollow.ts","./CharacterMovement.ts","./ClampedCtrl.ts","./joy-stick.ts","./NavMeshAgent.ts","./Astar.ts","./BinaryHeap.ts","./Builder.ts","./Channel.ts","./NavMesh.ts","./Plane.ts","./Triangle.ts","./nUtils.ts","./PoolManager.ts","./ShaderToy.ts","./NavTest.ts","./RandomMatColor.ts","./SceneTest.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Mirror.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,i,n,o,a,l,u,s,d,c,h,f,p,m;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,l=r.Camera,u=r.MeshRenderer,s=r.Texture2D,d=r.Material,c=r.RenderTexture,h=r.Node,f=r.Quat,p=r.Vec3,m=r.Component}],execute:function(){var g,M,w,b,y,C,_,x,T,P,v,R,z,k,N;o._RF.push({},"a2f50QLt4lElbvXG6ZPGkQJ","Mirror",void 0);var V=a.ccclass,D=a.property;r("Mirror",(g=V("Mirror"),M=D(l),w=D(u),b=D(s),y=D(s),C=D(s),_=D(d),g((P=e((T=function(r){function e(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=r.call.apply(r,[this].concat(o))||this,i(e,"targetCamera",P,n(e)),i(e,"meshRenderer",v,n(e)),i(e,"reflTexture",R,n(e)),i(e,"reflMask",z,n(e)),i(e,"reflNoise",k,n(e)),i(e,"mirrorMaterial",N,n(e)),e._renderTexture=null,e._mirrorCamera=null,e}t(e,r);var o=e.prototype;return o.onLoad=function(){this._renderTexture=new c,this._renderTexture.reset({width:1024,height:1024}),this._mirrorCamera=new h("MirrorCamera").addComponent(l),this._mirrorCamera.node.parent=this.node.parent,this._mirrorCamera.targetTexture=this._renderTexture,this.meshRenderer.getMaterial(0).setProperty("reflTexture",this._renderTexture.getGFXTexture()),this.meshRenderer.getMaterial(0).setProperty("reflMask",this.reflMask),this.meshRenderer.getMaterial(0).setProperty("reflNoise",this.reflNoise)},o.update=function(){this.updateMirrorCamera()},o.updateMirrorCamera=function(){var r=this.getMirrorPoint(this.targetCamera.node.worldPosition,this.node.worldPosition,this.node.forward);this._mirrorCamera.node.worldPosition=r;var e=this.getMirrorVector(this.targetCamera.node.forward,this.node.forward),t=this.getMirrorVector(this.targetCamera.node.up,this.node.forward),i=new f;f.fromViewUp(i,e,t),this._mirrorCamera.node.worldRotation=i},o.getMirrorPoint=function(r,e,t){var i=p.dot(p.subtract(new p,r,e),t),n=new p;return p.scaleAndAdd(n,r,t,-2*i),n},o.getMirrorVector=function(r,e){return this.getMirrorPoint(r,new p,e)},e}(m)).prototype,"targetCamera",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(T.prototype,"meshRenderer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(T.prototype,"reflTexture",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(T.prototype,"reflMask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(T.prototype,"reflNoise",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(T.prototype,"mirrorMaterial",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=T))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/NavMesh.ts",["cc","./Astar.ts","./Channel.ts","./nUtils.ts","./Plane.ts","./Triangle.ts"],(function(n){var e,t,r,o,s,i,a;return{setters:[function(n){e=n.cclegacy,t=n.Vec3},function(n){r=n.Astar},function(n){o=n.Channel},function(n){s=n.nUtils},function(n){i=n.Plane},function(n){a=n.Triangle}],execute:function(){e._RF.push({},"2ad69Row9tKGo6dR8xOoxwB","NavMesh",void 0);var u=new t,c=new i,l=new a,h=new t,v=new t,f=Math.pow(50,2);n("NavMesh",function(){function n(){}return n.setZoneData=function(n,e){this.zone[n]=e},n.clearZoneData=function(n){this.zone[n]=null},n.getGroup=function(n,e){if(!this.zone[n])return null;for(var r=null,o=f,s=0,i=this.zone[n].groups.length;s<i;s++)for(var a=this.zone[n].groups[s],u=0,c=a.length;u<c;u++){var l=a[u],h=t.squaredDistance(l.centroid,e);h<o&&(r=s,o=h)}return r},n.getRandomNode=function(n,e,r,o){if(!this.zone[n])return new t;r=r||null,o=o||0;var i=[];return this.zone[n].groups[e].forEach((function(n){r&&o?t.squaredDistance(r,n.centroid)<o*o&&i.push(n.centroid):i.push(n.centroid)})),s.sample(i)||new t},n.findPath=function(n,e,i,a){for(var u,c=this.zone[i].groups[a],l=this.zone[i].vertices,h=null,v=f,d=0,p=c.length;d<p;d++){var g=c[d];(u=t.squaredDistance(g.centroid,n))<v&&(h=g,v=u)}var z=null;v=f;for(var w=0,P=c.length;w<P;w++){var x=c[w];(u=t.squaredDistance(x.centroid,e))<v&&s.isVectorInPolygon(e,x,l)&&(z=x,v=u)}if(!h||!z)return null;var D=r.search(c,h,z),I=function(n,e){for(var t=0;t<n.neighbours.length;t++)if(n.neighbours[t]===e.id)return n.portals[t]},q=new o;q.push(n);for(var m=0;m<D.length;m++){var N=D[m],R=D[m+1];if(R){var b=I(N,R);q.push(l[b[0]],l[b[1]])}}return q.push(e),q.stringPull(),q.path},n.getClosestNode=function(n,e,r,o){void 0===o&&(o=!1);var i=this.zone[e].groups[r],a=this.zone[e].vertices,u=null,c=f;return i.forEach((function(e){var r=t.squaredDistance(e.centroid,n);r<c&&(!o||s.isVectorInPolygon(n,e,a))&&(u=e,c=r)})),u},n.clampStep=function(n,e,r,o,s){var i,a,d=this.zone[r].vertices,p=this.zone[r].groups[o],g=[e],z={};z[e.id]=0,u.set(0,0,0),i=f,c.setFromCoplanarPoints(d[e.vertexIds[0]],d[e.vertexIds[1]],d[e.vertexIds[2]]),c.projectPoint(n,h),v.set(h);for(var w=g.pop();w;w=g.pop()){l.set(d[w.vertexIds[0]],d[w.vertexIds[1]],d[w.vertexIds[2]]),l.closestPointToPoint(v,h),(a=t.squaredDistance(h,v))<i&&(u.set(h),i=a);var P=z[w.id];if(!(P>2))for(var x=0;x<w.neighbours.length;x++){var D=p[w.neighbours[x]];D.id in z||(g.push(D),z[D.id]=P+1)}}s.set(u)},n}()).zone={},e._RF.pop()}}}));

System.register("chunks:///_virtual/NavMeshAgent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./nUtils.ts"],(function(t){var e,n,s,i,o,h,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t._decorator,i=t.SkeletalAnimationComponent,o=t.Vec3,h=t.Component},function(t){a=t.nUtils}],execute:function(){var r;n._RF.push({},"dfc11KeIodAQaGnodWJT/N8","NavMeshAgent",void 0);var l=s.ccclass;s.property,t("NavMeshAgent",l("NavMeshAgent")(r=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).move=!1,e._path=[],e.speed=3,e.roleAngel=0,e.step=0,e.currstep=null,e.anm=null,e.anmName=null,e.rotateSpeed=400,e.pos=new o,e.des=new o,e.currentAngleY=0,e.targetAngleY=0,e}e(n,t);var s=n.prototype;return s.onEnable=function(){this.anm=this.node.getComponent(i),this.anmName=null,this.playLoopAnm("idle"),this.currentAngleY=this.node.eulerAngles.y},s.onDisable=function(){this.move=!1,this.anm=null,this._path.length=0,this.currstep=null,this.step=0},s.playLoopAnm=function(t){this.anmName!=t&&(this.anm.play(t),this.anmName=t)},s.startMove=function(t){this.stopMove(),this._path=t,this.move=!0},s.stopMove=function(){this.move=!1,this._path.length=0,this.step=0,this.currstep=null,this.playLoopAnm("idle")},s.update=function(t){this.move&&(this.playLoopAnm("run"),this.pos.set(this.node.position),this.currstep!==this.step&&(this.des.set(this._path[this.step]),this.rotateRole(this.pos,this.des),this.currstep=this.step),this.smoothRotate(t),a.MoveTowards(this.pos,this.pos,this.des,t*this.speed)&&this.changeStep(),this.node.setPosition(this.pos))},s.changeStep=function(){this.step++,this.step==this._path.length&&(this.playLoopAnm("idle"),this.move=!1)},s.rotateRole=function(t,e){this.targetAngleY=180*Math.atan2(e.x-t.x,e.z-t.z)/Math.PI%360,this.targetAngleY<0&&(this.targetAngleY+=360)},s.normalizeAngle=function(t){return(t%360+360)%360},s.smoothRotate=function(t){this.currentAngleY=this.normalizeAngle(this.currentAngleY),this.targetAngleY=this.normalizeAngle(this.targetAngleY);var e=this.targetAngleY-this.currentAngleY;if(e=(e+540)%360-180,Math.abs(e)>.1){var n=this.rotateSpeed*t;this.currentAngleY+=Math.sign(e)*Math.min(n,Math.abs(e)),this.currentAngleY=this.normalizeAngle(this.currentAngleY),this.node.setRotationFromEuler(0,this.currentAngleY,0)}},n}(h))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/NavTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NavMesh.ts","./NavMeshAgent.ts","./Builder.ts","./PoolManager.ts"],(function(e){var n,t,o,i,r,a,s,l,u,c,h,f,d,g,v,p,m,b,y,N,P,T,M,A,C;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.JsonAsset,l=e.CameraComponent,u=e.Vec3,c=e.resources,h=e.Prefab,f=e.input,d=e.Input,g=e.sys,v=e.view,p=e.macro,m=e.screen,b=e.MeshRenderer,y=e.isValid,N=e.geometry,P=e.Component},function(e){T=e.NavMesh},function(e){M=e.NavMeshAgent},function(e){A=e.Builder},function(e){C=e.PoolManager}],execute:function(){var z,D,E,w,S,_,L,U,O;r._RF.push({},"16666ugOSRNLqk2sZ/HleKG","NavTest",void 0);var R=a.ccclass,B=a.property,H=new u,I=new u;e("default",(z=R("NavTest"),D=B(s),E=B(l),w=B({type:M}),z((L=n((_=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"navUrl",L,i(n)),o(n,"mainCamera",U,i(n)),o(n,"agent",O,i(n)),n.targetPos=new u,n.zone=null,n}t(n,e);var r=n.prototype;return r.start=function(){c.load("Prefab/Pointer",h,(function(e,n){C.ins.setPrefab("Pointer",n)}))},r.onEnable=function(){f.on(d.EventType.TOUCH_END,this.screenTouch,this),this.changeScreeen();var e=A.buildZoneByJson(this.navUrl.json);this.zone=this.navUrl.name,T.setZoneData(this.zone,e)},r.onDisable=function(){A.cleanGeometry(),T.clearZoneData(this.zone),this.zone=null,f.off(d.EventType.TOUCH_END,this.screenTouch,this)},r.changeScreeen=function(){g.isBrowser&&g.isMobile&&(v.setOrientation(p.ORIENTATION_LANDSCAPE),m.requestFullScreen())},r.screenTouch=function(e){var n=e.getLocation();this.getTouchModel(n)},r.getTouchModel=function(e){for(var n=this.mainCamera.screenPointToRay(e.x,e.y),t=this.node.parent.getComponentsInChildren(b),o=null,i=Number.MAX_VALUE,r=0;r<t.length;r++){var a=t[r];if(y(a.node,!0)&&a.node.active&&a.model){var s=N.intersect.rayModel(n,a.model,{mode:N.ERaycastMode.CLOSEST,doubleSided:!1,distance:Number.MAX_VALUE});s&&s<i&&(i=s,o=a)}}if(null!=o){n.computeHit(this.targetPos,i);for(var l=this.node.children.length;l>=0;l--)C.ins.putNode(this.node.children[l]);for(l=0;l<this.agent.length;l++)this.moveAgent(this.agent[l],this.targetPos)}},r.moveAgent=function(e,n){var t=this.findPath(this.zone,e.node.position,n);if(t&&t.length>0){e.startMove(t);for(var o=0,i=0;i<t.length;i++)this.setDebugNode(t[i],o),o+=50}else e.stopMove()},r.findPath=function(e,n,t){H.set(n);var o=T.getGroup(e,H);return I.set(t),T.findPath(H,I,e,o)},r.setDebugNode=function(e,n){var t=this;void 0===n&&(n=0),setTimeout((function(){C.ins.getNode("Pointer",t.node).setPosition(e)}),n)},n}(P)).prototype,"navUrl",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(_.prototype,"mainCamera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(_.prototype,"agent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=_))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/nUtils.ts",["cc"],(function(n){var r,t;return{setters:[function(n){r=n.cclegacy,t=n.Vec3}],execute:function(){r._RF.push({},"8ee06Csgn5F7rr0XWn5nG1u","nUtils",void 0);n("nUtils",function(){function n(){}return n.roundNumber=function(n,r){var t=Math.pow(10,r);return Math.round(n*t)/t},n.isPointInPoly=function(n,r){for(var t=!1,e=-1,o=n.length,u=o-1;++e<o;u=e)(n[e].z<=r.z&&r.z<n[u].z||n[u].z<=r.z&&r.z<n[e].z)&&r.x<(n[u].x-n[e].x)*(r.z-n[e].z)/(n[u].z-n[e].z)+n[e].x&&(t=!t);return t},n.isVectorInPolygon=function(n,r,t){var e=1e5,o=-1e5,u=[];return r.vertexIds.forEach((function(n){e=Math.min(t[n].y,e),o=Math.max(t[n].y,o),u.push(t[n])})),!!(n.y<o+.5&&n.y>e-.5&&this.isPointInPoly(u,n))},n.MoveTowards=function(n,r,t,e){var o=t.x-r.x,u=t.y-r.y,i=t.z-r.z,a=o*o+u*u+i*i;if(0==a||e>=0&&a<=e*e)return n.set(t),!0;var c=Math.sqrt(a);return n.set(r.x+o/c*e,r.y+u/c*e,r.z+i/c*e),!1},n.triarea2=function(n,r,t){var e=r.x-n.x,o=r.z-n.z;return(t.x-n.x)*o-e*(t.z-n.z)},n.mergeVertices=function(n){var r,t,e,o,u,i={},a=new Array,c=[];for(e=0,o=n.vertices.length;e<o;e++)null==i[t=n.vertices[e]]?(i[t]=e,a.push(t),c[e]=a.length-1):c[e]=c[i[t]];var s=[];for(e=0,o=n.faces.length;e<o;e++){(u=n.faces[e])[0]=c[u[0]],u[1]=c[u[1]],u[2]=c[u[2]],r=u;for(var f=0;f<3;f++)if(r[f]==r[(f+1)%3]){s.push(e);break}}for(e=s.length-1;e>=0;e--){var h=s[e];n.faces.splice(h,1)}n.vertices=a},n.sample=function(n){return n[Math.floor(Math.random()*n.length)]},n.vequal=function(n,r){return t.distance(n,r)<1e-5},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Plane.ts",["cc"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy,o=t.Vec3}],execute:function(){n._RF.push({},"64a8fMSe85Bn7aYYIv3XX3h","Plane",void 0);var r=new o,i=new o;t("Plane",function(){function t(t,n){void 0===t&&(t=new o(1,0,0)),void 0===n&&(n=0),this.normal=t,this.constant=n,this.normal=t,this.constant=n}var n=t.prototype;return n.setFromNormalAndCoplanarPoint=function(t,n){return this.normal.set(t),this.constant=-n.dot(this.normal),this},n.setFromCoplanarPoints=function(t,n,a){var s=o.subtract(r,a,n).cross(o.subtract(i,t,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this},n.projectPoint=function(t,n){return n.set(this.normal.multiplyScalar(-this.distanceToPoint(t)).add(t))},n.distanceToPoint=function(t){return this.normal.dot(t)+this.constant},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,o,n;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,o=t.instantiate,n=t.NodePool}],execute:function(){e._RF.push({},"c5907eNs8FKs716t2Unmn66","PoolManager",void 0),t("PoolManager",function(){function t(){this._dictPool={},this._dictPrefab={}}var e=t.prototype;return e.copyNode=function(t,i){var e=t.name;this._dictPrefab[e]=t;var r=null;if(this._dictPool.hasOwnProperty(e)){var s=this._dictPool[e];r=s.size()>0?s.get():o(t)}else{var a=new n;this._dictPool[e]=a,r=o(t)}return i&&(r.parent=i,r.active=!0),r},e.getNode=function(t,i,e){var r,s;if("string"==typeof t){if(s=t,!(r=this._dictPrefab[t]))return console.log("Pool invalid prefab name = ",s),null}else r=t,s=t.data.name;var a=null;if(this._dictPool.hasOwnProperty(s)){var c=this._dictPool[s];a=c.size()>0?c.get():o(r)}else{var l=new n;this._dictPool[s]=l,a=o(r)}return i&&(a.parent=i,a.active=!0,e&&(a.position=e)),a},e.putNode=function(t,i){if(t){var e=t.name,o=null;this._dictPool.hasOwnProperty(e)?o=this._dictPool[e]:(o=new n,this._dictPool[e]=o),o.put(t)}},e.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},e.setPrefab=function(t,i){this._dictPrefab[t]=i},e.getPrefab=function(t){return this._dictPrefab[t]},i(t,null,[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}())._ins=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/RandomMatColor.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,r,n,e,a,l;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,n=o._decorator,e=o.MeshRenderer,a=o.Color,l=o.Component}],execute:function(){var c;r._RF.push({},"ee19eGTEOpM04RQAZpcFtmr","RandomMatColor",void 0);var i=n.ccclass;n.property,o("RandomMatColor",i("RandomMatColor")(c=function(o){function r(){return o.apply(this,arguments)||this}return t(r,o),r.prototype.onEnable=function(){this.node.getComponent(e).material.setProperty("mainColor",new a(Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random())))},r}(l))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/SceneTest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var c,t,n,o,s;return{setters:[function(e){c=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,o=e.director,s=e.Component}],execute:function(){var a;t._RF.push({},"d773b1/HlZAzpx2ym49G3JF","SceneTest",void 0);var r=n.ccclass;e("SceneTest",r("SceneTest")(a=function(e){function t(){return e.apply(this,arguments)||this}return c(t,e),t.prototype.loadScene=function(e,c){switch(c){case"0":o.loadScene("Demo");break;case"1":o.loadScene("MazeTest");break;case"2":o.loadScene("NavTest");break;case"3":o.loadScene("ClampTest")}},t}(s))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/ShaderToy.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,a,c,l,s,u,p,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.SpriteComponent,l=e.Material,s=e.sys,u=e.view,p=e.macro,h=e.screen,f=e.Component}],execute:function(){var y,b,g,m,d,S,v;o._RF.push({},"f139eZcCV1BMJATtYpZqGbk","ShaderToy",void 0);var T=a.ccclass,M=a.property;e("ShaderToy",(y=T("ShaderToy"),b=M(c),g=M({type:l}),y((S=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"bg",S,i(t)),n(t,"mat",v,i(t)),t}r(t,e);var o=t.prototype;return o.onEnable=function(){this.bg.customMaterial=this.mat[Math.floor(this.mat.length*Math.random())],this.changeScreeen()},o.changeScreeen=function(){s.isBrowser&&s.isMobile&&(u.setOrientation(p.ORIENTATION_LANDSCAPE),h.requestFullScreen())},t}(f)).prototype,"bg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(d.prototype,"mat",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=d))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Triangle.ts",["cc"],(function(t){var r,e;return{setters:[function(t){r=t.cclegacy,e=t.Vec3}],execute:function(){r._RF.push({},"35cdcVeRH9OiZ+tY3WOZsIf","Triangle",void 0);var i=new e,n=new e,a=new e,s=new e,c=new e,u=new e;t("Triangle",function(){function t(t,r,i){void 0===t&&(t=new e),void 0===r&&(r=new e),void 0===i&&(i=new e),this.a=t,this.b=r,this.c=i,this.c=i,this.b=r,this.a=t}var r=t.prototype;return r.set=function(t,r,e){return this.a.set(t),this.b.set(r),this.c.set(e),this},r.closestPointToPoint=function(t,r){var o,l,d=this.a,v=this.b,h=this.c;e.subtract(i,v,d),e.subtract(n,h,d),e.subtract(a,t,d);var f=i.dot(a),b=n.dot(a);if(f<=0&&b<=0)return r.set(d.clone());e.subtract(s,t,v);var p=i.dot(s),w=n.dot(s);if(p>=0&&w<=p)return r.set(v.clone());var y=f*w-p*b;if(y<=0&&f>=0&&p<=0)return o=f/(f-p),r.set(d.clone().add(i.multiplyScalar(o)));e.subtract(c,t,h);var m=i.dot(c),S=n.dot(c);if(S>=0&&m<=S)return r.set(h);var g=m*b-f*S;if(g<=0&&b>=0&&S<=0)return l=b/(b-S),r.set(d.add(n.multiplyScalar(l)));var T=p*S-m*w;if(T<=0&&w-p>=0&&m-S>=0)return e.subtract(u,h,v),l=(w-p)/(w-p+(m-S)),r.set(v.add(u.multiplyScalar(l)));var R=1/(T+g+y);return o=g*R,l=y*R,r.set(d.add(i.multiplyScalar(o)).add(n.multiplyScalar(l)))},t}());r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});